### 1. 可重入问题

* 可重入性：
  1. 可被多个任务调用而不会造成数据错误
  2. 在任意时刻被中断，稍后继续运行不会造成错误
* 不可重入性
  * 不能被多个任务共享，除非确保函数互斥调用
* 解决方法

```
static int tmp;
void swap(int *a,int *b){  
    tmp=*a;
    *a=*b;
    *b=tmp;
}
```

```
1. 全局变量->局部变量
void swap(int *a,int *b){
    tmp=*a;
    *a=*b;
    *b=tmp;
}
```

```
2. 信号量
static int tmp;
void swap(int *a,int *b){  
    [申请信号量]
    tmp=*a;
    *a=*b;
    *b=tmp;
}
```

```
3. 禁止中断
void swap(int *a,int *b){
    Disable_IRQ();
    tmp=*a;
    *a=*b;
    *b=tmp;
    Enable_IRQ();
  
}
```

### 2. C语言和汇编混合编程

* 汇编调用C
  1. 汇编遵循ATPCS
  2. 在汇编中使用IMPORT伪指令声明调用函数
  3. 通过BL指令调用C函数
* C调用汇编
  1. 汇编遵循ATPCS
  2. 在汇编中使用EXPORT伪指令声明被调用的函数
  3. C中使用extern关键字声明调用函数
* 内联汇编：
  * 可实现部分高级语言实现不了或不易实现的功能
  * 对于时间紧迫要求的功能可以采用
  * 不支持部分底层功能

### 3. 嵌入式存储

* Non-Volatile内存
  * 写平衡：
* 主要技术
  * NAND
  * NOR
* 比较：
  * NAND：单元排列串行，以块和页为单位进行读写，顺序读写，随机读写慢
  * NOR：单元排列并行，以字节为单位进行读写，随机读写快，可以片内执行

### 4. 如何进行嵌入式开发

1. 选择硬件开发平台
2. 建立嵌入式Linux开发环境 
3. 系统软件开发
  
   * 嵌入式文件系统
   * 嵌入式设备驱动
   * 嵌入式GUI
4. 嵌入式应用开发